(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{67:function(e,t,n){},95:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(22),s=n.n(r),i=(n(67),n(68),n(12)),o=n(8),l=n(11),j=n.n(l),d=n(19),u=n(7),b=n(13),h=n.n(b),O=n(1),g=function(e){var t=Object(a.useState)(!0),n=Object(u.a)(t,2),c=n[0],r=n[1],s=e.movies;return console.log("prop movie:",s),Object(a.useEffect)((function(){0===s.length&&r(!1)}),[]),1==c?Object(O.jsx)("h4",{children:"Please wait, Loading...."}):s.map((function(e){return Object(O.jsx)(i.b,{to:"/detail/".concat(e.imdbID),children:Object(O.jsx)("div",{className:"image-container d-flex justify-content-start m-3",children:Object(O.jsx)("img",{src:e.Poster,alt:"movie"})})})}))},p=function(e){var t=e.showPerPage,n=e.onPaginationChange,c=e.total;console.log("showperpage:",t),console.log("total length:",c),console.log("math.ceil:",Math.ceil(c/t));var r=Object(a.useState)(1),s=Object(u.a)(r,2),i=s[0],o=s[1];Object(a.useEffect)((function(){var e=t*i;n(e-t,e)}),[i]);var l=function(e){"prev"===e?o(1===i?1:i-1):"next"===e&&(Math.ceil(c/t)===i?o(i):o(i+1))};return Object(O.jsx)("div",{className:"d-flex justify-content-center",style:{marginBottom:"4rem",marginTop:"2rem"},children:Object(O.jsx)("nav",{"aria-label":"Page navigation example",children:Object(O.jsxs)("ul",{class:"pagination",children:[Object(O.jsx)("li",{class:"page-item",children:Object(O.jsx)("a",{class:"page-link bg-primary text-light",onClick:function(){return l("prev")},children:"Previous"})}),new Array(Math.ceil(c/t)).fill("").map((function(e,t){return Object(O.jsx)("li",{class:"page-item ".concat(t+1===i?"active":null),children:Object(O.jsx)("a",{class:"page-link",onClick:function(){return o(t+1)},children:t+1})})})),Object(O.jsx)("li",{class:"page-item",children:Object(O.jsx)("a",{class:"page-link bg-primary text-light",onClick:function(){return l("next")},children:"Next"})})]})})})};n(35);function x(){var e=Object(a.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!0),s=Object(u.a)(r,2),i=s[0],o=s[1],l=function(){var e=Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/movies",e.next=3,h.a.get("/api/movies");case 3:t=e.sent,n=t.data,console.log("movies data :",n),c(n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){0==n.length&&(l(),o(!1))}));var b=Object(a.useState)(10),x=Object(u.a)(b,2),f=x[0],m=(x[1],Object(a.useState)({start:0,end:f})),v=Object(u.a)(m,2),S=v[0],y=v[1];return Object(O.jsx)(O.Fragment,{children:1==i?Object(O.jsx)("h4",{children:"Please wait, Loading...."}):Object(O.jsxs)("div",{className:"container-fluid",children:[Object(O.jsx)("div",{className:"row",children:Object(O.jsx)(g,{movies:n.slice(S.start,S.end)})}),Object(O.jsx)(p,{showPerPage:f,onPaginationChange:function(e,t){y({start:e,end:t})},total:n.length})]})})}function f(e){var t=e.location.search.split("=")[1];console.log("plain search :",t);var n=Object(a.useState)(!0),c=Object(u.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)([]),o=Object(u.a)(i,2),l=o[0],b=o[1],x=Object(a.useState)(""),f=Object(u.a)(x,2),m=f[0],v=f[1],S=function(){var e=Object(d.a)(j.a.mark((function e(){var n,a,c,r,s,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/movies/text/".concat(t));case 2:if(n=e.sent,console.log("searched data in db first :",n.data),console.log("searched length in db first :",n.data.length),0!==n.data.length){e.next=33;break}return a="http://www.omdbapi.com/?s=".concat(t,"&apikey=283ed57f"),e.next=9,h.a.get(a);case 9:if(c=e.sent,r=c.data,console.log("movies data omdb :",r.Search),void 0===r.Search){e.next=30;break}if(!(r.Search.length>1)){e.next=22;break}return h.a.post("/api/movies/Generic/add",r.Search),e.next=17,h.a.get("/api/movies/text/".concat(t));case 17:s=e.sent,console.log("result :",s.data),b(s.data),e.next=28;break;case 22:return console.log("data search 1:",r.Search),e.next=25,h.a.post("/api/movies/add",r.Search[0]);case 25:i=e.sent,console.log("result :",i.data),b([i.data]);case 28:e.next=31;break;case 30:v("Not found");case 31:e.next=34;break;case 33:b(n.data);case 34:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){0==l.length&&(S(),s(!1))}));var y=Object(a.useState)(4),w=Object(u.a)(y,2),N=w[0],E=(w[1],Object(a.useState)({start:0,end:N})),I=Object(u.a)(E,2),k=I[0],C=I[1];return 1==r?Object(O.jsx)("h4",{children:"Please wait, Loading...."}):"Not found"===m?Object(O.jsx)("h2",{className:"container mt-4",children:"No result found..."}):Object(O.jsxs)("div",{className:"container-fluid",children:[Object(O.jsx)("div",{className:"row",children:Object(O.jsx)(g,{movies:l.slice(k.start,k.end)})}),l.length>4?Object(O.jsx)(p,{showPerPage:N,onPaginationChange:function(e,t){C({start:e,end:t})},total:l.length}):null]})}var m=n(21),v=n(98),S="USER_REGISTER_REQUEST",y="USER_REGISTER_SUCCESS",w="USER_REGISTER_FAIL",N="USER_SIGNIN_REQUEST",E="USER_SIGNIN_SUCCESS",I="USER_SIGNIN_FAIL",k="USER_SIGNOUT";function C(){return Object(O.jsxs)("div",{className:"loading",children:[Object(O.jsx)("i",{className:"fa fa-spinner fa-spin"})," Loading..."]})}function P(e){return Object(O.jsx)("div",{className:"alert alert-".concat(e.variant||"info"),children:e.children})}function R(e){var t=Object(a.useState)(""),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(!0),o=Object(u.a)(s,2),l=o[0],b=o[1],g=Object(a.useState)(""),p=Object(u.a)(g,2),x=p[0],f=p[1],N=Object(a.useState)(0),I=Object(u.a)(N,2),k=I[0],R=I[1],U=Object(a.useState)(""),F=Object(u.a)(U,2),_=F[0],T=F[1],L=Object(a.useState)(""),A=Object(u.a)(L,2),B=A[0],D=A[1],q=Object(a.useState)("User"),G=Object(u.a)(q,2),M=G[0],J=G[1],H=Object(m.c)((function(e){return e.userRegister})),Y=H.userInfo,Q=H.loading,X=H.error,V=Object(m.b)();return Object(a.useEffect)((function(){Y&&e.history.push("/")}),[e.history,Y]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(v.a,{show:l,onHide:function(){b(!1),e.history.push("/")},children:[Object(O.jsx)(v.a.Header,{closeButton:!0,children:Object(O.jsx)(v.a.Title,{children:"Create an account"})}),Object(O.jsx)(v.a.Body,{children:Object(O.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),_!==B?alert("Password and confirm password are not match"):(console.log("in register"),V(function(e,t,n,a){return function(){var c=Object(d.a)(j.a.mark((function c(r){var s,i;return j.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return r({type:S,payload:{email:t,password:n}}),c.prev=1,console.log("in action register"),c.next=5,h.a.post("/api/user/register",{name:e,email:t,password:n,contact:a});case 5:s=c.sent,i=s.data,r({type:y,payload:i}),r({type:E,payload:i}),localStorage.setItem("userInfo",JSON.stringify(i)),c.next=15;break;case 12:c.prev=12,c.t0=c.catch(1),r({type:w,payload:c.t0.response&&c.t0.response.data.message?c.t0.response.data.message:c.t0.message});case 15:case"end":return c.stop()}}),c,null,[[1,12]])})));return function(e){return c.apply(this,arguments)}}()}(c,x,_,k)))},children:[Q&&Object(O.jsx)(C,{}),X&&Object(O.jsx)(P,{variant:"danger",children:X}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"name",children:"Name"}),Object(O.jsx)("input",{type:"text",id:"name",placeholder:"Enter name",required:!0,onChange:function(e){return r(e.target.value)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(O.jsx)("input",{type:"email",id:"email",placeholder:"Enter email",required:!0,onChange:function(e){return f(e.target.value)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"email",children:"Phone No."}),Object(O.jsx)("input",{type:"tel",id:"contact",placeholder:"Enter Number",required:!0,onChange:function(e){return R(e.target.value)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",id:"password",placeholder:"Enter password",required:!0,onChange:function(e){return T(e.target.value)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),Object(O.jsx)("input",{type:"password",id:"confirmPassword",placeholder:"Enter confirm password",required:!0,onChange:function(e){return D(e.target.value)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"Register as",children:"Register as"}),Object(O.jsx)("select",{id:"registerAs",name:"registerAs",value:M,onChange:function(e){return J(e.target.value)},children:Object(O.jsx)("option",{value:"User",children:"User"})})]}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"primary",type:"submit",children:"Register"})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{}),Object(O.jsxs)("div",{children:["Already have an account?"," ",Object(O.jsx)(i.b,{to:"/signin",children:"Sign-In"})]})]})]})})]})})}function U(e){var t=Object(a.useState)(!0),n=Object(u.a)(t,2),c=n[0],r=n[1],s=Object(a.useState)(""),o=Object(u.a)(s,2),l=o[0],b=o[1],g=Object(a.useState)(""),p=Object(u.a)(g,2),x=p[0],f=p[1],S=Object(a.useState)("User"),y=Object(u.a)(S,2),w=y[0],k=y[1],R=Object(m.c)((function(e){return e.userSignin})),U=R.userInfo,F=R.loading,_=R.error,T=Object(m.b)();return Object(a.useEffect)((function(){U&&e.history.push("/")}),[e.history,U]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(v.a,{show:c,onHide:function(){r(!1),e.history.push("/")},children:[Object(O.jsx)(v.a.Header,{closeButton:!0,children:Object(O.jsx)(v.a.Title,{children:"Sign In"})}),Object(O.jsx)(v.a.Body,{children:Object(O.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),"User"===w&&T(function(e,t){return function(){var n=Object(d.a)(j.a.mark((function n(a){var c,r;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:N,payload:{email:e,password:t}}),n.prev=1,console.log("in action signin"),n.next=5,h.a.post("/api/user/signin",{email:e,password:t});case 5:c=n.sent,r=c.data,localStorage.setItem("userInfo",JSON.stringify(r)),a({type:E,payload:r}),n.next=15;break;case 11:n.prev=11,n.t0=n.catch(1),console.log("in action  error signin"),a({type:I,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 15:case"end":return n.stop()}}),n,null,[[1,11]])})));return function(e){return n.apply(this,arguments)}}()}(l,x))},children:[F&&Object(O.jsx)(C,{}),_&&Object(O.jsx)(P,{variant:"danger",children:_}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(O.jsx)("input",{type:"email",id:"email",placeholder:"Enter email",required:!0,onChange:function(e){return b(e.target.value)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",id:"password",placeholder:"Enter password",required:!0,onChange:function(e){return f(e.target.value)}})]}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{htmlFor:"Signin as",children:"Signin as"}),Object(O.jsx)("select",{id:"SigninAs",name:"SigninAs",value:w,onChange:function(e){return k(e.target.value)},children:Object(O.jsx)("option",{value:"User",children:"User"})})]}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{className:"primary",type:"submit",children:"Sign In"})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("label",{}),Object(O.jsxs)("div",{children:["New User?"," ",Object(O.jsx)(i.b,{to:"/register",children:"Create your account"})]})]})]})})]})})}var F=n(101),_=n(99),T=n(61),L=n(97),A=n(100);function B(){var e=Object(m.c)((function(e){return e.userSignin})).userInfo,t=Object(o.f)(),n=Object(a.useState)(""),c=Object(u.a)(n,2),r=c[0],s=c[1],l=Object(m.b)(),b=function(){var e=Object(d.a)(j.a.mark((function e(n){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),console.log("search value :",r),"t"===r[0]&&"t"===r[1]?(console.log("search by id"),t.push("/detail/".concat(r))):(console.log("search by gerneric"),t.push("/search?q=".concat(r)));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)(F.a,{bg:"dark",variant:"dark",children:[Object(O.jsx)(F.a.Brand,{as:i.c,to:"/",exact:!0,children:"Movies"}),Object(O.jsxs)(_.a,{inline:!0,style:{marginLeft:"21rem"},children:[Object(O.jsx)(T.a,{onChange:function(e){return s(e.target.value)},type:"text",placeholder:"Search",style:{width:"25rem"},className:"mr-sm-2",required:"true"}),Object(O.jsx)(L.a,{onClick:b,variant:"outline-light",children:"Search"})]}),Object(O.jsxs)(A.a,{className:"ml-auto ",children:[Object(O.jsx)(A.a.Link,{as:i.c,to:"/",exact:!0,children:"Home"}),e?Object(O.jsx)(A.a.Link,{as:i.c,to:"/",onClick:function(){l((function(e){localStorage.removeItem("userInfo"),e({type:k}),document.location.href="/"}))},children:"Signout"}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(A.a.Link,{as:i.c,to:"/signin",children:"Signin"}),Object(O.jsx)(A.a.Link,{as:i.c,to:"/register",children:"Register"})]})]})]})}function D(e){var t=e.match.params.id;console.log("id search :",t);var n=Object(a.useState)(!0),c=Object(u.a)(n,2),r=c[0],s=c[1],i=Object(a.useState)([]),o=Object(u.a)(i,2),l=o[0],b=o[1],g=Object(a.useState)(""),p=Object(u.a)(g,2),x=p[0],f=p[1],m=function(){var e=Object(d.a)(j.a.mark((function e(){var n,a,c,r,s;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("/api/movies/id/".concat(t));case 2:if(n=e.sent,console.log("searched data in db first :",n.data[0]),console.log("searched length in db first :",n.data.length),0!==n.data.length){e.next=24;break}return a="http://www.omdbapi.com/?i=".concat(t,"&apikey=283ed57f"),e.next=9,h.a.get(a);case 9:if(c=e.sent,r=c.data,console.log("movies data :",r),"False"===r.Response){e.next=21;break}return e.next=15,h.a.post("/api/movies/add",r);case 15:s=e.sent,console.log("result :",s),console.log("result data :",s.data),b(s.data),e.next=22;break;case 21:f("Not found");case 22:e.next=25;break;case 24:b(n.data[0]);case 25:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){0==l.length&&(m(),s(!1))})),1==r?Object(O.jsx)("h4",{children:"Please wait, Loading...."}):"Not found"===x?Object(O.jsx)("h2",{className:"container mt-4",children:"No result found..."}):Object(O.jsx)("div",{className:"container-fluid",children:Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("div",{className:"image-container d-flex justify-content-start m-3",children:Object(O.jsx)("img",{src:l.Poster,alt:"movie"})}),Object(O.jsxs)("div",{className:"coloum m-3",children:[Object(O.jsxs)("h4",{children:[Object(O.jsx)("b",{children:"IMDB ID"})," : ",l.imdbID," ",Object(O.jsx)("br",{})]}),Object(O.jsxs)("h4",{children:[Object(O.jsx)("b",{children:"TITLE"})," : ",l.Title," ",Object(O.jsx)("br",{})]}),Object(O.jsxs)("h4",{children:[Object(O.jsx)("b",{children:"YEAR"})," : ",l.Year," ",Object(O.jsx)("br",{})]}),Object(O.jsxs)("h4",{children:[Object(O.jsx)("b",{children:"TYPE"})," : ",l.Type," ",Object(O.jsx)("br",{})]})]})]})})}var q=function(){return Object(O.jsxs)(i.a,{children:[Object(O.jsxs)(i.a,{children:[Object(O.jsx)(B,{}),Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{path:"/signin",component:U}),Object(O.jsx)(o.a,{path:"/register",component:R}),Object(O.jsx)(o.a,{path:"/search",component:f}),Object(O.jsx)(o.a,{path:"/detail/:id",component:D}),Object(O.jsx)(o.a,{path:"/",component:x,exact:!0})]})]}),Object(O.jsx)("div",{className:"footer bg-dark ",children:Object(O.jsxs)("p",{children:["Created By Jayeshchoudhary | ",Object(O.jsx)("i",{className:"fa fa-copyright"})," 2021 All rights reserved."]})})]})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,102)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))},M=n(34),J=n(62),H={userSignin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Y=Object(M.b)({userSignin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return{loading:!0};case E:return{loading:!1,userInfo:t.payload};case I:return{loading:!1,error:t.payload};case k:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return{loading:!0};case y:return{loading:!1,userInfo:t.payload};case w:return{loading:!1,error:t.payload};default:return e}}}),Q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||M.c,X=Object(M.d)(Y,H,Q(Object(M.a)(J.a)));s.a.render(Object(O.jsx)(m.a,{store:X,children:Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(q,{})})}),document.getElementById("root")),G()}},[[95,1,2]]]);
//# sourceMappingURL=main.a650e678.chunk.js.map